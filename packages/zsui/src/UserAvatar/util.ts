function hex2rgb(hex: string) {
  let color: any = hex;

  color = color.replace(/ |#/g, '');
  if (color.length === 3) {
    color = color.replace(/(.)/g, '$1$1');
  }

  // http://stackoverflow.com/a/6637537/1250044
  color = color.match(/../g) || [];

  return [
    parseInt(color[0], 16),
    parseInt(color[1], 16),
    parseInt(color[2], 16),
  ].join(',');
}

const colors = ['#1e80ff', '#0fbf60', '#ff8b07', '#10C3A9', '#FFCD2A', '#9747FF', '#13AD5C', '#F34821'];

export const nameToColor = (name: string = '') => {
  if (!name) {
    return 'rgb(208, 211, 214)';
  }

  // 根据名字生成一个0-colors.length范围的数字
  const index =
    parseInt(String(name.charCodeAt(name.length - 1)), 10) % colors.length;

  const hexColor = colors[index];
  const rgbColor = hex2rgb(`${hexColor}`);

  const startColor = `rgba(${rgbColor}, 0.6)`;
  const midColor = `rgba(${rgbColor}, 0.8)`;
  const endColor = `rgba(${rgbColor}, 1)`;

  return `conic-gradient(from 210deg, ${startColor} 0deg, ${midColor} 180deg, ${endColor} 360deg)`;
};

// 汉字转拼音首字母的映射表（完整百家姓）
const pinyinMap: Record<string, string> = {
  // A
  '阿': 'A', '艾': 'A', '安': 'A', '敖': 'A',
  // B  
  '白': 'B', '包': 'B', '鲍': 'B', '毕': 'B', '边': 'B', '卞': 'B', '班': 'B', '贝': 'B', '薄': 'B', '卜': 'B',
  // C
  '蔡': 'C', '曹': 'C', '陈': 'C', '程': 'C', '崔': 'C', '常': 'C', '车': 'C', '成': 'C', '池': 'C', '仇': 'C', '褚': 'C',
  // D
  '戴': 'D', '邓': 'D', '丁': 'D', '董': 'D', '杜': 'D', '段': 'D', '窦': 'D', '狄': 'D', '刁': 'D', '东': 'D',
  // E
  '鄂': 'E',
  // F
  '范': 'F', '方': 'F', '费': 'F', '冯': 'F', '符': 'F', '傅': 'F', '樊': 'F', '房': 'F', '封': 'F', '丰': 'F',
  // G
  '高': 'G', '葛': 'G', '龚': 'G', '古': 'G', '关': 'G', '郭': 'G', '顾': 'G', '谷': 'G', '管': 'G', '国': 'G',
  // H
  '韩': 'H', '何': 'H', '贺': 'H', '洪': 'H', '侯': 'H', '胡': 'H', '华': 'H', '黄': 'H', '霍': 'H', '花': 'H', '惠': 'H', '和': 'H', '桓': 'H', '扈': 'H', '哈': 'H',
  // I
  // J
  '贾': 'J', '江': 'J', '姜': 'J', '蒋': 'J', '金': 'J', '纪': 'J', '季': 'J', '计': 'J', '简': 'J', '焦': 'J', '解': 'J', '井': 'J', '景': 'J', '鞠': 'J',
  // K
  '康': 'K', '柯': 'K', '孔': 'K', '空': 'K', '寇': 'K',
  // L
  '赖': 'L', '李': 'L', '梁': 'L', '廖': 'L', '林': 'L', '刘': 'L', '龙': 'L', '卢': 'L', '陆': 'L', '罗': 'L', '路': 'L', '骆': 'L', '蓝': 'L', '雷': 'L', '黎': 'L', '厉': 'L', '连': 'L', '廉': 'L', '凌': 'L', '柳': 'L', '娄': 'L', '鲁': 'L', '栾': 'L', '乐': 'L', '吕': 'L',
  // M
  '马': 'M', '毛': 'M', '梅': 'M', '孟': 'M', '莫': 'M', '米': 'M', '闵': 'M', '明': 'M', '缪': 'M', '苗': 'M', '牧': 'M', '慕': 'M',
  // N
  '倪': 'N', '聂': 'N', '牛': 'N', '年': 'N', '宁': 'N', '钮': 'N',
  // O
  '欧': 'O', '欧阳': 'O',
  // P
  '潘': 'P', '彭': 'P', '蒲': 'P', '皮': 'P', '平': 'P', '浦': 'P',
  // Q
  '齐': 'Q', '钱': 'Q', '强': 'Q', '秦': 'Q', '邱': 'Q', '戚': 'Q', '祁': 'Q', '屈': 'Q', '全': 'Q', '权': 'Q',
  // R
  '饶': 'R', '任': 'R', '冉': 'R', '戎': 'R', '容': 'R', '茹': 'R', '阮': 'R',
  // S
  '沈': 'S', '盛': 'S', '石': 'S', '宋': 'S', '苏': 'S', '孙': 'S', '司': 'S', '松': 'S', '索': 'S', '沙': 'S', '山': 'S', '商': 'S', '尚': 'S', '韶': 'S', '申': 'S', '慎': 'S', '师': 'S', '时': 'S', '史': 'S', '舒': 'S', '水': 'S', '宿': 'S', '施': 'S',
  // T
  '谭': 'T', '汤': 'T', '唐': 'T', '陶': 'T', '田': 'T', '童': 'T', '涂': 'T', '谈': 'T', '滕': 'T', '铁': 'T', '通': 'T', '佟': 'T',
  // U
  // V
  // W
  '王': 'W', '魏': 'W', '吴': 'W', '伍': 'W', '武': 'W', '万': 'W', '汪': 'W', '韦': 'W', '卫': 'W', '文': 'W', '闻': 'W', '翁': 'W', '巫': 'W', '乌': 'W', '邬': 'W', '毋': 'W',
  // X
  '夏': 'X', '萧': 'X', '谢': 'X', '徐': 'X', '许': 'X', '薛': 'X', '席': 'X', '习': 'X', '奚': 'X', '郗': 'X', '郤': 'X', '咸': 'X', '相': 'X', '向': 'X', '项': 'X', '肖': 'X', '辛': 'X', '邢': 'X', '幸': 'X', '熊': 'X', '修': 'X', '须': 'X', '宣': 'X', '荀': 'X',
  // Y
  '杨': 'Y', '姚': 'Y', '叶': 'Y', '易': 'Y', '尹': 'Y', '余': 'Y', '袁': 'Y', '岳': 'Y', '严': 'Y', '颜': 'Y', '燕': 'Y', '羊': 'Y', '阳': 'Y', '养': 'Y', '要': 'Y', '伊': 'Y', '衣': 'Y', '依': 'Y', '仪': 'Y', '夷': 'Y', '宜': 'Y', '乙': 'Y', '义': 'Y', '益': 'Y', '阴': 'Y', '殷': 'Y', '印': 'Y', '应': 'Y', '英': 'Y', '营': 'Y', '雍': 'Y', '永': 'Y', '尤': 'Y', '游': 'Y', '於': 'Y', '于': 'Y', '鱼': 'Y', '俞': 'Y', '虞': 'Y', '禹': 'Y', '玉': 'Y', '郁': 'Y', '元': 'Y', '原': 'Y', '云': 'Y',
  // Z
  '曾': 'Z', '詹': 'Z', '张': 'Z', '章': 'Z', '赵': 'Z', '郑': 'Z', '钟': 'Z', '周': 'Z', '朱': 'Z', '祝': 'Z', '邹': 'Z', '左': 'Z', '臧': 'Z', '湛': 'Z', '长孙': 'Z', '甄': 'Z', '支': 'Z', '知': 'Z', '直': 'Z', '植': 'Z', '止': 'Z', '只': 'Z', '志': 'Z', '制': 'Z', '治': 'Z', '智': 'Z', '中': 'Z', '仲': 'Z', '重': 'Z', '诸': 'Z', '庄': 'Z', '卓': 'Z', '宗': 'Z', '祖': 'Z', '佐': 'Z', '作': 'Z'
};

/**
 * 获取中文名的拼音首字母
 * @param name 中文名
 * @returns 拼音首字母（大写）
 */
export const getChineseNameInitial = (name: string = ''): string => {
  if (!name) return '';
  
  // 获取第一个字符
  const firstChar = name.charAt(0);
  
  // 如果是英文字母，直接返回大写
  if (/[a-zA-Z]/.test(firstChar)) {
    return firstChar.toUpperCase();
  }
  
  // 如果是汉字，查找拼音首字母
  if (pinyinMap[firstChar]) {
    return pinyinMap[firstChar];
  }
  
  // 如果不在映射表中，返回原字符
  return firstChar;
};
